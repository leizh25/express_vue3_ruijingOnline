import{r as P,o as le,n as te,a as Ge,w as Y,b as $e,c as Le,u as ye,d as l,e as ie,f as q,g as Te,h as J,i as he,j as Be,k as Oe,l as Ve,m as F,t as T,p as E,q as Z,s as Ke,v as oe,I as W,x as de,y as xe,z as Je,A as Qe,B as pe,S as ea,C as re,D as be,E as M,F as aa,L as Ae,T as Ie,G as ta,H as De,J as N,K as Se,M as ce,P as oa,N as na,O as la,Q as Pe,R as ue,U as ia,V as sa,W as ra,X as ca,Y as ua,Z as da,_ as va,$ as ma,a0 as fa,a1 as ga,a2 as Fe,a3 as ha,a4 as Ue,a5 as ba,a6 as Q,a7 as wa,a8 as _a,a9 as X,aa as ne,ab as ae,ac as H,ad as fe,ae as A,af as Ee,ag as ya,ah as Ye,ai as ee,aj as Xe,ak as xa,al as pa,am as Pa,an as Ia,ao as Sa,ap as Ca}from"./index-ee74ed16.js";const ka=(e,t)=>{const n=P(),a=()=>{n.value=ye(e).height};return le(()=>{if(te(a),t)for(let i=1;i<=3;i++)setTimeout(a,100*i)}),Ge(()=>te(a)),Y([$e,Le],a),n};function Ra(e,t){const n=ka(e,!0);return a=>l("div",{class:t("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[a()])}const[za,G]=ie("image"),$a={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:F,height:F,radius:F,lazyLoad:Boolean,iconSize:F,showError:T,errorIcon:E("photo-fail"),iconPrefix:String,showLoading:T,loadingIcon:E("photo")};var La=q({name:za,props:$a,emits:["load","error"],setup(e,{emit:t,slots:n}){const a=P(!1),i=P(!0),o=P(),{$Lazyload:u}=Te().proxy,v=J(()=>{const m={width:he(e.width),height:he(e.height)};return Be(e.radius)&&(m.overflow="hidden",m.borderRadius=he(e.radius)),m});Y(()=>e.src,()=>{a.value=!1,i.value=!0});const g=m=>{i.value&&(i.value=!1,t("load",m))},f=()=>{const m=new Event("load");Object.defineProperty(m,"target",{value:o.value,enumerable:!0}),g(m)},s=m=>{a.value=!0,i.value=!1,t("error",m)},d=(m,k,z)=>z?z():l(W,{name:m,size:e.iconSize,class:k,classPrefix:e.iconPrefix},null),w=()=>{if(i.value&&e.showLoading)return l("div",{class:G("loading")},[d(e.loadingIcon,G("loading-icon"),n.loading)]);if(a.value&&e.showError)return l("div",{class:G("error")},[d(e.errorIcon,G("error-icon"),n.error)])},x=()=>{if(a.value||!e.src)return;const m={alt:e.alt,class:G("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?Z(l("img",oe({ref:o},m),null),[[Ke("lazy"),e.src]]):l("img",oe({ref:o,src:e.src,onLoad:g,onError:s},m),null)},p=({el:m})=>{const k=()=>{m===o.value&&i.value&&f()};o.value?k():te(k)},C=({el:m})=>{m===o.value&&!a.value&&s()};return u&&Oe&&(u.$on("loaded",p),u.$on("error",C),Ve(()=>{u.$off("loaded",p),u.$off("error",C)})),le(()=>{te(()=>{var m;(m=o.value)!=null&&m.complete&&!e.lazyLoad&&f()})}),()=>{var m;return l("div",{class:G({round:e.round,block:e.block}),style:v.value},[x(),w(),(m=n.default)==null?void 0:m.call(n)])}}});const je=de(La),Ce=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),Ta=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),we=ie("image-preview")[1],ke=2.6,Ba={src:String,show:Boolean,active:Number,minZoom:re(F),maxZoom:re(F),rootWidth:re(Number),rootHeight:re(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickOverlay:Boolean};var Oa=q({props:Ba,emits:["scale","close","longPress"],setup(e,{emit:t,slots:n}){const a=xe({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=Je(),o=P(),u=P(),v=P(!1),g=P(!1);let f=0;const s=J(()=>{const{scale:c,moveX:h,moveY:y,moving:L,zooming:B,initializing:U}=a,ve={transitionDuration:B||L||U?"0s":".3s"};return(c!==1||g.value)&&(ve.transform=`matrix(${c}, 0, 0, ${c}, ${h}, ${y})`),ve}),d=J(()=>{if(a.imageRatio){const{rootWidth:c,rootHeight:h}=e,y=v.value?h/a.imageRatio:c;return Math.max(0,(a.scale*y-c)/2)}return 0}),w=J(()=>{if(a.imageRatio){const{rootWidth:c,rootHeight:h}=e,y=v.value?h:c*a.imageRatio;return Math.max(0,(a.scale*y-h)/2)}return 0}),x=(c,h)=>{var y;if(c=M(c,+e.minZoom,+e.maxZoom+1),c!==a.scale){const L=c/a.scale;if(a.scale=c,h){const B=ye((y=o.value)==null?void 0:y.$el),U={x:B.width*.5,y:B.height*.5},ve=a.moveX-(h.x-B.left-U.x)*(L-1),qe=a.moveY-(h.y-B.top-U.y)*(L-1);a.moveX=M(ve,-d.value,d.value),a.moveY=M(qe,-w.value,w.value)}else a.moveX=0,a.moveY=g.value?f:0;t("scale",{scale:c,index:e.active})}},p=()=>{x(1)},C=()=>{const c=a.scale>1?1:2;x(c,c===2||g.value?{x:i.startX.value,y:i.startY.value}:void 0)};let m,k,z,_,O,$,j,se,r=!1;const b=c=>{const{touches:h}=c;if(m=h.length,m===2&&e.disableZoom)return;const{offsetX:y}=i;i.start(c),k=a.moveX,z=a.moveY,se=Date.now(),r=!1,a.moving=m===1&&(a.scale!==1||g.value),a.zooming=m===2&&!y.value,a.zooming&&(_=a.scale,O=Ce(h))},R=c=>{const{touches:h}=c;if(i.move(c),a.moving){const{deltaX:y,deltaY:L}=i,B=y.value+k,U=L.value+z;if((B>d.value||B<-d.value)&&!r&&i.isHorizontal()){a.moving=!1;return}r=!0,be(c,!0),a.moveX=M(B,-d.value,d.value),a.moveY=M(U,-w.value,w.value)}if(a.zooming&&(be(c,!0),h.length===2)){const y=Ce(h),L=_*y/O;$=Ta(h),x(L,$)}},S=c=>{var h;if(m>1)return;const{offsetX:y,offsetY:L}=i,B=Date.now()-se,U=250;if(y.value<Ie&&L.value<Ie)if(B<U)if(e.doubleScale)if(j)clearTimeout(j),j=null,C();else{if(!e.closeOnClickOverlay&&c.target===((h=u.value)==null?void 0:h.$el))return;j=setTimeout(()=>{t("close"),j=null},U)}else t("close");else B>ta&&t("longPress")},V=c=>{let h=!1;if((a.moving||a.zooming)&&(h=!0,a.moving&&k===a.moveX&&z===a.moveY&&(h=!1),!c.touches.length)){a.zooming&&(a.moveX=M(a.moveX,-d.value,d.value),a.moveY=M(a.moveY,-w.value,w.value),a.zooming=!1),a.moving=!1,k=0,z=0,_=1,a.scale<1&&p();const y=+e.maxZoom;a.scale>y&&x(y,$)}be(c,h),S(c),i.reset()},D=()=>{const{rootWidth:c,rootHeight:h}=e,y=h/c,{imageRatio:L}=a;v.value=a.imageRatio>y&&L<ke,g.value=a.imageRatio>y&&L>=ke,g.value&&(f=(L*c-h)/2,a.moveY=f,a.initializing=!0,aa(()=>{a.initializing=!1})),p()},ge=c=>{const{naturalWidth:h,naturalHeight:y}=c.target;a.imageRatio=y/h,D()};return Y(()=>e.active,p),Y(()=>e.show,c=>{c||p()}),Y(()=>[e.rootWidth,e.rootHeight],D),Qe("touchmove",R,{target:J(()=>{var c;return(c=u.value)==null?void 0:c.$el})}),pe({resetScale:p}),()=>{const c={loading:()=>l(Ae,{type:"spinner"},null)};return l(ea,{ref:u,class:we("swipe-item"),onTouchstartPassive:b,onTouchend:V,onTouchcancel:V},{default:()=>[n.image?l("div",{class:we("image-wrap")},[n.image({src:e.src})]):l(je,{ref:o,src:e.src,fit:"contain",class:we("image",{vertical:v.value}),style:s.value,onLoad:ge},c)]})}}});const[Va,K]=ie("image-preview"),Aa=["show","teleport","transition","overlayStyle","closeOnPopstate"],Da={show:Boolean,loop:T,images:De(),minZoom:N(1/3),maxZoom:N(3),overlay:T,closeable:Boolean,showIndex:T,className:Se,closeIcon:E("clear"),transition:String,beforeClose:Function,doubleScale:T,overlayClass:Se,overlayStyle:Object,swipeDuration:N(300),startPosition:N(0),showIndicators:Boolean,closeOnPopstate:T,closeOnClickOverlay:T,closeIconPosition:E("top-right"),teleport:[String,Object]};var Me=q({name:Va,props:Da,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:t,slots:n}){const a=P(),i=P(),o=xe({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),u=()=>{if(a.value){const _=ye(a.value.$el);o.rootWidth=_.width,o.rootHeight=_.height,a.value.resize()}},v=_=>t("scale",_),g=_=>t("update:show",_),f=()=>{Pe(e.beforeClose,{args:[o.active],done:()=>g(!1)})},s=_=>{_!==o.active&&(o.active=_,t("change",_))},d=()=>{if(e.showIndex)return l("div",{class:K("index")},[n.index?n.index({index:o.active}):`${o.active+1} / ${e.images.length}`])},w=()=>{if(n.cover)return l("div",{class:K("cover")},[n.cover()])},x=()=>{o.disableZoom=!0},p=()=>{o.disableZoom=!1},C=()=>l(na,{ref:a,lazyRender:!0,loop:e.loop,class:K("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:s,onDragEnd:p,onDragStart:x},{default:()=>[e.images.map((_,O)=>l(Oa,{ref:$=>{O===o.active&&(i.value=$)},src:_,show:e.show,active:o.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:o.rootWidth,rootHeight:o.rootHeight,disableZoom:o.disableZoom,doubleScale:e.doubleScale,closeOnClickOverlay:e.closeOnClickOverlay,onScale:v,onClose:f,onLongPress:()=>t("longPress",{index:O})},{image:n.image}))]}),m=()=>{if(e.closeable)return l(W,{role:"button",name:e.closeIcon,class:[K("close-icon",e.closeIconPosition),la],onClick:f},null)},k=()=>t("closed"),z=(_,O)=>{var $;return($=a.value)==null?void 0:$.swipeTo(_,O)};return pe({resetScale:()=>{var _;(_=i.value)==null||_.resetScale()},swipeTo:z}),le(u),Y([$e,Le],u),Y(()=>e.startPosition,_=>s(+_)),Y(()=>e.show,_=>{const{images:O,startPosition:$}=e;_?(s(+$),te(()=>{u(),z(+$,{immediate:!0})})):t("close",{index:o.active,url:O[o.active]})}),()=>l(oa,oe({class:[K(),e.className],overlayClass:[K("overlay"),e.overlayClass],onClosed:k,"onUpdate:show":g},ce(e,Aa)),{default:()=>[m(),C(),d(),w()]})}});let me;const Fa={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function Ua(){({instance:me}=ia({setup(){const{state:e,toggle:t}=sa(),n=()=>{e.images=[]};return()=>l(Me,oe(e,{onClosed:n,"onUpdate:show":t}),null)}}))}const Ea=(e,t=0)=>{if(Oe)return me||Ua(),e=Array.isArray(e)?{images:e,startPosition:t}:e,me.open(ue({},Fa,e)),me};de(Me);const[Ze,Re]=ie("tabbar"),Ya={route:Boolean,fixed:T,border:T,zIndex:F,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:N(0),safeAreaInsetBottom:{type:Boolean,default:null}},Ne=Symbol(Ze);var Xa=q({name:Ze,props:Ya,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const a=P(),{linkChildren:i}=ra(Ne),o=Ra(a,Re),u=()=>{var f;return(f=e.safeAreaInsetBottom)!=null?f:e.fixed},v=()=>{var f;const{fixed:s,zIndex:d,border:w}=e;return l("div",{ref:a,role:"tablist",style:ca(d),class:[Re({fixed:s}),{[ua]:w,"van-safe-area-bottom":u()}]},[(f=n.default)==null?void 0:f.call(n)])};return i({props:e,setActive:(f,s)=>{Pe(e.beforeChange,{args:[f],done(){t("update:modelValue",f),t("change",f),s()}})}}),()=>e.fixed&&e.placeholder?o(v):v()}});const ja=de(Xa),[Ma,_e]=ie("tabbar-item"),Za=ue({},da,{dot:Boolean,icon:String,name:F,badge:F,badgeProps:Object,iconPrefix:String});var Na=q({name:Ma,props:Za,emits:["click"],setup(e,{emit:t,slots:n}){const a=va(),i=Te().proxy,{parent:o,index:u}=ma(Ne);if(!o)return;const v=J(()=>{var s;const{route:d,modelValue:w}=o.props;if(d&&"$route"in i){const{$route:x}=i,{to:p}=e,C=ga(p)?p:{path:p};return!!x.matched.find(m=>{const k="path"in C&&C.path===m.path,z="name"in C&&C.name===m.name;return k||z})}return((s=e.name)!=null?s:u.value)===w}),g=s=>{var d;v.value||o.setActive((d=e.name)!=null?d:u.value,a),t("click",s)},f=()=>{if(n.icon)return n.icon({active:v.value});if(e.icon)return l(W,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var s;const{dot:d,badge:w}=e,{activeColor:x,inactiveColor:p}=o.props,C=v.value?x:p;return l("div",{role:"tab",class:_e({active:v.value}),style:{color:C},tabindex:0,"aria-selected":v.value,onClick:g},[l(fa,oe({dot:d,class:_e("icon"),content:w},e.badgeProps),{default:f}),l("div",{class:_e("text")},[(s=n.default)==null?void 0:s.call(n,{active:v.value})])])}}});const Ha=de(Na),[Wa,I,qa]=ie("uploader");function ze(e,t){return new Promise(n=>{if(t==="file"){n();return}const a=new FileReader;a.onload=i=>{n(i.target.result)},t==="dataUrl"?a.readAsDataURL(e):t==="text"&&a.readAsText(e)})}function He(e,t){return Fe(e).some(n=>n.file?ha(t)?t(n.file):n.file.size>+t:!1)}function Ga(e,t){const n=[],a=[];return e.forEach(i=>{He(i,t)?a.push(i):n.push(i)}),{valid:n,invalid:a}}const Ka=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,Ja=e=>Ka.test(e);function We(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?Ja(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var Qa=q({props:{name:F,item:re(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:t,slots:n}){const a=()=>{const{status:s,message:d}=e.item;if(s==="uploading"||s==="failed"){const w=s==="failed"?l(W,{name:"close",class:I("mask-icon")},null):l(Ae,{class:I("loading")},null),x=Be(d)&&d!=="";return l("div",{class:I("mask")},[w,x&&l("div",{class:I("mask-message")},[d])])}},i=s=>{const{name:d,item:w,index:x,beforeDelete:p}=e;s.stopPropagation(),Pe(p,{args:[w,{name:d,index:x}],done:()=>t("delete")})},o=()=>t("preview"),u=()=>t("reupload"),v=()=>{if(e.deletable&&e.item.status!=="uploading"){const s=n["preview-delete"];return l("div",{role:"button",class:I("preview-delete",{shadow:!s}),tabindex:0,"aria-label":qa("delete"),onClick:i},[s?s():l(W,{name:"cross",class:I("preview-delete-icon")},null)])}},g=()=>{if(n["preview-cover"]){const{index:s,item:d}=e;return l("div",{class:I("preview-cover")},[n["preview-cover"](ue({index:s},d))])}},f=()=>{const{item:s,lazyLoad:d,imageFit:w,previewSize:x,reupload:p}=e;return We(s)?l(je,{fit:w,src:s.objectUrl||s.content||s.url,class:I("preview-image"),width:Array.isArray(x)?x[0]:x,height:Array.isArray(x)?x[1]:x,lazyLoad:d,onClick:p?u:o},{default:g}):l("div",{class:I("file"),style:Ue(e.previewSize)},[l(W,{class:I("file-icon"),name:"description"},null),l("div",{class:[I("file-name"),"van-ellipsis"]},[s.file?s.file.name:s.url]),g()])};return()=>l("div",{class:I("preview")},[f(),a(),v()])}});const et={name:N(""),accept:E("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:N(1/0),imageFit:E("cover"),resultType:E("dataUrl"),uploadIcon:E("photograph"),uploadText:String,deletable:T,reupload:Boolean,afterRead:Function,showUpload:T,modelValue:De(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:T,previewOptions:Object,previewFullImage:T,maxSize:{type:[Number,String,Function],default:1/0}};var at=q({name:Wa,props:et,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:t,slots:n}){const a=P(),i=[],o=P(-1),u=P(!1),v=(r=e.modelValue.length)=>({name:e.name,index:r}),g=()=>{a.value&&(a.value.value="")},f=r=>{if(g(),He(r,e.maxSize))if(Array.isArray(r)){const b=Ga(r,e.maxSize);if(r=b.valid,t("oversize",b.invalid,v()),!r.length)return}else{t("oversize",r,v());return}if(r=xe(r),o.value>-1){const b=[...e.modelValue];b.splice(o.value,1,r),t("update:modelValue",b),o.value=-1}else t("update:modelValue",[...e.modelValue,...Fe(r)]);e.afterRead&&e.afterRead(r,v())},s=r=>{const{maxCount:b,modelValue:R,resultType:S}=e;if(Array.isArray(r)){const V=+b-R.length;r.length>V&&(r=r.slice(0,V)),Promise.all(r.map(D=>ze(D,S))).then(D=>{const ge=r.map((c,h)=>{const y={file:c,status:"",message:"",objectUrl:URL.createObjectURL(c)};return D[h]&&(y.content=D[h]),y});f(ge)})}else ze(r,S).then(V=>{const D={file:r,status:"",message:"",objectUrl:URL.createObjectURL(r)};V&&(D.content=V),f(D)})},d=r=>{const{files:b}=r.target;if(e.disabled||!b||!b.length)return;const R=b.length===1?b[0]:[].slice.call(b);if(e.beforeRead){const S=e.beforeRead(R,v());if(!S){g();return}if(wa(S)){S.then(V=>{s(V||R)}).catch(g);return}}s(R)};let w;const x=()=>t("closePreview"),p=r=>{if(e.previewFullImage){const b=e.modelValue.filter(We),R=b.map(S=>(S.objectUrl&&!S.url&&S.status!=="failed"&&(S.url=S.objectUrl,i.push(S.url)),S.url)).filter(Boolean);w=Ea(ue({images:R,startPosition:b.indexOf(r),onClose:x},e.previewOptions))}},C=()=>{w&&w.close()},m=(r,b)=>{const R=e.modelValue.slice(0);R.splice(b,1),t("update:modelValue",R),t("delete",r,v(b))},k=r=>{u.value=!0,o.value=r,te(()=>se())},z=()=>{u.value||(o.value=-1),u.value=!1},_=(r,b)=>{const R=["imageFit","deletable","reupload","previewSize","beforeDelete"],S=ue(ce(e,R),ce(r,R,!0));return l(Qa,oe({item:r,index:b,onClick:()=>t(e.reupload?"clickReupload":"clickPreview",r,v(b)),onDelete:()=>m(r,b),onPreview:()=>p(r),onReupload:()=>k(b)},ce(e,["name","lazyLoad"]),S),ce(n,["preview-cover","preview-delete"]))},O=()=>{if(e.previewImage)return e.modelValue.map(_)},$=r=>t("clickUpload",r),j=()=>{if(e.modelValue.length>=+e.maxCount&&!e.reupload)return;const r=e.modelValue.length>=+e.maxCount&&e.reupload,b=e.readonly?null:l("input",{ref:a,type:"file",class:I("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&o.value===-1,disabled:e.disabled,onChange:d,onClick:z},null);return n.default?Z(l("div",{class:I("input-wrapper"),onClick:$},[n.default(),b]),[[Q,!r]]):Z(l("div",{class:I("upload",{readonly:e.readonly}),style:Ue(e.previewSize),onClick:$},[l(W,{name:e.uploadIcon,class:I("upload-icon")},null),e.uploadText&&l("span",{class:I("upload-text")},[e.uploadText]),b]),[[Q,e.showUpload&&!r]])},se=()=>{a.value&&!e.disabled&&a.value.click()};return Ve(()=>{i.forEach(r=>URL.revokeObjectURL(r))}),pe({chooseFile:se,closeImagePreview:C}),ba(()=>e.modelValue),()=>l("div",{class:I()},[l("div",{class:I("wrapper",{disabled:e.disabled})},[O(),j()])])}});const tt=de(at);const ot={__name:"First",setup(e){const t=P([]),n=async o=>{console.log(o instanceof Array);const u=new FormData;if(o instanceof Array){console.log(o.length);for(const g of o)u.append("file",g.file)}else u.append("file",o.file);(await ae.post("/banners",u)).code===200?H({type:"success",message:"上传图片成功"}):H({type:"danger",message:"上传图片失败"})},a=async()=>{const o=await ae.get("/banners");o.code==200&&(t.value=o.data)};_a(async()=>{const o=localStorage.getItem("token")||0;Date.now()-o>1e3*60*60?window.location.href="/#/":await a()});const i=async o=>{const u=await ae.delete(`/banners/${o.name}`);u.code==200?H({type:"danger",message:`删除${u.data.name.split(".")[0]}成功`}):H({type:"danger",message:"删除失败"})};return(o,u)=>{const v=fe,g=tt;return X(),ne("div",null,[l(v,{title:"轮播图管理",style:{"background-color":"#bfa"}}),l(g,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=f=>t.value=f),multiple:"","after-read":n,onDelete:i},null,8,["modelValue"])])}}},nt={__name:"Second",setup(e){const t=P([]),n=P(!1),a=P(!1),i=async()=>{const u=await ae.get("/messages");u.code==200&&(t.value=u.data.reverse()),a.value=!0,n.value=!1};le(()=>{i()});const o=async u=>{console.log("id: ",u),(await ae.delete(`/messages/${u}`)).code==200?(H({type:"danger",message:"删除成功"}),i()):H({type:"danger",message:"删除失败"})};return(u,v)=>{const g=fe,f=Xe,s=xa;return X(),ne("div",null,[l(g,{title:"留言板管理",style:{"background-color":"#bfa"}}),l(s,{loading:n.value,"onUpdate:loading":v[0]||(v[0]=d=>n.value=d),finished:a.value,"finished-text":"没有更多了",onLoad:i},{default:A(()=>[(X(!0),ne(Ee,null,ya(t.value,d=>(X(),Ye(g,{key:d.id,title:d.content},{default:A(()=>[l(f,{type:"danger",size:"mini",onClick:w=>o(d.id)},{default:A(()=>[ee("删除")]),_:2},1032,["onClick"])]),_:2},1032,["title"]))),128))]),_:1},8,["loading","finished"])])}}},lt={};function it(e,t){const n=fe;return X(),ne("div",null,[l(n,{title:"哈哈",value:"",style:{"background-color":"#bfa"}})])}const st=pa(lt,[["render",it]]),rt={style:{margin:"16px"}},ct={__name:"Fourth",setup(e){const t=P(""),n=P(""),a=async()=>{t.value&&n.value&&(await ae.post("/register",{username:t.value.trim(),password:n.value.trim()})).code===200&&(H({type:"success",message:"注册成功"}),t.value="",n.value="")};return(i,o)=>{const u=fe,v=Ia,g=Sa,f=Xe,s=Ca;return X(),ne("div",null,[l(u,{title:"管理员设置-添加管理员",value:"",style:{"background-color":"#bfa"}}),l(s,null,{default:A(()=>[l(g,{inset:""},{default:A(()=>[l(v,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=d=>t.value=d),name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),l(v,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=d=>n.value=d),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),Pa("div",rt,[l(f,{round:"",block:"",type:"primary","native-type":"submit",onClick:a},{default:A(()=>[ee(" 提交 ")]),_:1})])]),_:1})])}}};const ut={__name:"Tabbar",emits:["change"],setup(e,{emit:t}){const n=t,a=P(0),i=o=>{n("change",a.value)};return le(()=>{localStorage.getItem("page")&&(a.value=localStorage.getItem("page")*1),document.title="瑞景在线 - 后台管理"}),(o,u)=>{const v=Ha,g=ja;return X(),Ye(g,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=f=>a.value=f),onChange:i},{default:A(()=>[l(v,{icon:"home-o"},{default:A(()=>[ee("轮播图")]),_:1}),l(v,{icon:"chat-o"},{default:A(()=>[ee("留言板")]),_:1}),l(v,{icon:"friends-o"},{default:A(()=>[ee("好友")]),_:1}),l(v,{icon:"setting-o"},{default:A(()=>[ee("设置")]),_:1})]),_:1},8,["modelValue"])}}},vt={__name:"index",setup(e){const t=P(0);le(()=>{t.value=localStorage.getItem("page")*1||0});const n=a=>{t.value=a,localStorage.setItem("page",a)};return(a,i)=>(X(),ne(Ee,null,[Z(l(ot,null,null,512),[[Q,t.value==0]]),Z(l(nt,null,null,512),[[Q,t.value==1]]),Z(l(st,null,null,512),[[Q,t.value==2]]),Z(l(ct,null,null,512),[[Q,t.value==3]]),l(ut,{onChange:n})],64))}};export{vt as default};
